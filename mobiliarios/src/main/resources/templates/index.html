 <!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <meta name="current-user-id" th:if="${session.usuarioId}" th:content="${session.usuarioId}">
    <title>Inicio | FURENT</title>
    <!-- Script inline para aplicar tema ANTES de cargar CSS y evitar parpadeos -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            const bg = theme === 'dark' ? '#0f172a' : '#ffffff';
            const style = document.createElement('style');
            style.id = 'pre-theme-style';
            style.textContent = `html,body{background:${bg};}`;
            document.head.appendChild(style);
            if (theme === 'dark') {
                document.documentElement.classList.add('dark-mode');
                document.documentElement.classList.add('prefers-dark');
                document.body.classList.add('dark-mode');
            } else {
                document.documentElement.classList.remove('dark-mode');
                document.documentElement.classList.remove('prefers-dark');
                document.body.classList.remove('dark-mode');
            }
        })();
    </script>
    <link rel="stylesheet" th:href="@{/css/normalize.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" th:href="@{/css/app.css}">
    <link rel="stylesheet" th:href="@{/css/estilos.css}">
    <link rel="stylesheet" th:href="@{/css/modern-styles.css}">
    <link rel="stylesheet" th:href="@{/css/dark-mode.css}">
    <link rel="stylesheet" th:href="@{/css/cart-preview.css}">
    <link rel="stylesheet" th:href="@{/css/header-adjustments.css}">
    <link rel="stylesheet" th:href="@{/css/whatsapp-float.css}">
    <link rel="stylesheet" th:href="@{/css/payment-notifications.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script th:src="@{/js/theme-toggle.js}"></script>
    <script th:src="@{/js/format-utils.js}"></script>
    <script th:src="@{/js/cart-preview.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script th:src="@{/js/payment-notifications.js}"></script>

</head>

<body>
     
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container top-bar-content">
            <div class="contact-info">
                <span><i class="bi bi-telephone"></i> +57 300 123 4567</span>
                <span><i class="bi bi-envelope"></i> info@furniturerent.com</span>
            </div>
            <div class="social-links">
                <a href="#"><i class="bi bi-facebook"></i></a>
                <a href="#"><i class="bi bi-instagram"></i></a>
                <a href="#"><i class="bi bi-twitter"></i></a>
                <a href="#"><i class="bi bi-linkedin"></i></a>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header">
        <div class="container header-content">
            <a href="/" class="logo" aria-label="Ir al inicio">
                <i class="bi bi-house-heart"></i>
                <span>FU<strong>RENT</strong></span>
            </a>

            <nav class="nav-principal">
                <a href="/" class="active">Inicio</a>
                <a href="/about">Nosotros</a>
                <a href="/store">Alquilar</a>
                <a href="/contact">Contacto</a>
                <a th:if="${session.usuario}" href="/alquiler/mis-alquileres">
                    <i class="bi bi-calendar-check"></i> Mis alquileres
                </a>
                <a th:if="${session.usuario}" href="/favoritos">
                    <i class="bi bi-heart"></i> Favoritos
                </a>
            </nav>
            
            <!-- Menú de usuario logueado -->
            <div class="user-menu" th:if="${session.usuario}">
                <div class="user-menu-toggle">
                    <div class="user-avatar" th:text="${#strings.substring(session.usuarioNombre, 0, 1)}">U</div>
                    <span th:text="${session.usuarioNombre}">Usuario</span>
                    <i class="bi bi-chevron-down"></i>
                </div>
                <div class="user-dropdown">
                    <div class="user-dropdown-header">
                        <strong th:text="${session.usuarioNombre}">Usuario</strong>
                        <p th:text="${session.usuario.correo}">email@example.com</p>
                    </div>
                    <div class="user-dropdown-menu">
                        <a href="/user-account">
                            <i class="bi bi-person"></i> Mi cuenta
                        </a>
                        <a href="/alquiler/mis-alquileres">
                            <i class="bi bi-calendar-check"></i> Mis alquileres
                        </a>
                        <div class="user-dropdown-divider"></div>
                        <a href="/logout" class="logout-link">
                            <i class="bi bi-box-arrow-right"></i> Cerrar sesión
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Botón de notificaciones de pago (campanita) -->
            <button class="payment-bell-btn" id="paymentBellBtn" th:if="${session.usuario}" aria-label="Notificaciones de pago" title="Notificaciones de pago">
                <i class="bi bi-bell-fill"></i>
                <span class="payment-notification-badge" id="paymentNotificationBadge" style="display: none;">0</span>
            </button>
            
            <!-- Botón del carrito -->
            <button class="cart-btn-header" onclick="toggleCart()" aria-label="Ver carrito" title="Ver carrito de compras">
                <i class="bi bi-cart3"></i>
                <span class="cart-badge" id="cartBadge" style="display: none;">0</span>
            </button>
            
            <!-- Botón de cambio de tema -->
            <button class="theme-toggle-btn" aria-label="Cambiar tema" title="Cambiar entre modo claro y oscuro">
                <i class="bi bi-moon-fill"></i>
            </button>
            
            <!-- Botón de login si no hay sesión -->
            <a th:unless="${session.usuario}" href="/login" class="login-btn">
                <i class="bi bi-person-circle"></i> Iniciar sesión
            </a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Mobiliario premium para tus eventos</h1>
            <p class="hero-subtitle">Transforma cualquier espacio en un lugar extraordinario con nuestro mobiliario de alta calidad</p>
            <div class="hero-buttons">
                <a href="/store" class="btn btn-primary">Explorar catálogo</a>
                <a href="/contact" class="btn btn-secondary">Cotizar ahora</a>
            </div>
        </div>
        <div class="hero-scroll">
            <i class="bi bi-chevron-down"></i>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="container">
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-truck"></i>
                    </div>
                    <h3>Entrega rápida</h3>
                    <p>Servicio de entrega e instalación en tiempo récord</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h3>Calidad garantizada</h3>
                    <p>Mobiliario premium en perfectas condiciones</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-headset"></i>
                    </div>
                    <h3>Soporte 24/7</h3>
                    <p>Atención personalizada en todo momento</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-cash-coin"></i>
                    </div>
                    <h3>Precios competitivos</h3>
                    <p>Las mejores tarifas del mercado</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="container categories">
        <div class="section-header">
            <h2 class="section-title">Categorías de mobiliario</h2>
            <p class="section-subtitle">Encuentra el mobiliario perfecto para cada tipo de evento</p>
        </div>
        <div class="category-list">
            <div class="category">
                <div class="category-image">
                    <img src="img/categoria1.png" alt="mobiliario">
                    <div class="category-overlay">
                        <i class="bi bi-arrow-right-circle"></i>
                    </div>
                </div>
                <a href="#">Mobiliario para invitados</a>
            </div>
            <div class="category">
                <div class="category-image">
                    <img src="img/categoria2.png" alt="mobiliario dos">
                    <div class="category-overlay">
                        <i class="bi bi-arrow-right-circle"></i>
                    </div>
                </div>
                <a href="#">Mobiliario decorativo y ambientación</a>
            </div>
            <div class="category">
                <div class="category-image">
                    <img src="img/categoria3.png" alt="mobiliario tres">
                    <div class="category-overlay">
                        <i class="bi bi-arrow-right-circle"></i>
                    </div>
                </div>
                <a href="#">Mobiliario funcional y de apoyo</a>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section class="about-us">
        <div class="container about-us-grid">
            <div class="text-about">
                <span class="about-badge">Más de 10 años de experiencia</span>
                <h2>Sobre nosotros</h2>
                <p>En FURENT nos especializamos en el alquiler de mobiliario para todo tipo de eventos
                    desde bodas y conferencias hasta ferias y reuniones corporativas. Con una amplia variedad de estilos y opciones
                    ofrecemos soluciones elegantes, funcionales y adaptadas a las necesidades de cada cliente.</p>
                <div class="about-stats">
                    <div class="stat-item">
                        <h3>500+</h3>
                        <p>Eventos realizados</p>
                    </div>
                    <div class="stat-item">
                        <h3>1000+</h3>
                        <p>Clientes satisfechos</p>
                    </div>
                    <div class="stat-item">
                        <h3>100%</h3>
                        <p>Calidad garantizada</p>
                    </div>
                </div>
                <a href="/about" class="btn btn-primary">Conocer más</a>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <main class="content-principal container">
        <div class="section-header">
            <h2 class="section-title">Nuestros mobiliarios</h2>
            <p class="section-subtitle">Descubre nuestra selección de mobiliario premium para eventos</p>
        </div>

        <div class="products-list">
            <!-- Mostrar solo los primeros 4 productos -->
            <div class="product product-home" th:each="producto, iterStat : ${productos}" th:if="${iterStat.index < 4}">
                <div class="product-image-container">
                    <img th:src="${producto.imagenProducto != null ? producto.imagenProducto : '/img/producto-default.jpg'}" th:alt="${producto.nombreProducto}">
                    <div class="product-overlay-home">
                        <a href="/store" class="btn-ver-mas">
                            <i class="bi bi-eye"></i> Ver más
                        </a>
                    </div>
                </div>
                <div class="text-product">
                    <h3 th:text="${producto.nombreProducto}">Nombre del Producto</h3>
                    <p th:text="${producto.descripcionProducto}">Descripción del producto</p>
                    <p class="price" th:text="${'$' + #numbers.formatDecimal(producto.precioProducto, 1, 'POINT', 2, 'COMMA')}">$0</p>
                </div>
            </div>
            
            <!-- Mensaje cuando no hay productos -->
            <div class="no-products" th:if="${#lists.isEmpty(productos)}">
                <i class="bi bi-inbox" style="font-size: 48px; display: block; margin-bottom: 20px; color: var(--text-light);"></i>
                <p>No hay productos disponibles en este momento.</p>
                <a href="/store" class="btn btn-primary" style="margin-top: 20px;">Ver catálogo completo</a>
            </div>
        </div>
        
        <!-- Botón para ver todos los productos -->
        <div class="view-all-products" th:if="${!#lists.isEmpty(productos)}">
            <a href="/store" class="btn btn-primary btn-large">
                <i class="bi bi-grid-3x3-gap"></i> Ver catálogo completo
            </a>
        </div>

    </main>

    <!-- Testimonials Section -->
    <section class="testimonials-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Lo que dicen nuestros clientes</h2>
                <p class="section-subtitle">Experiencias reales de quienes confiaron en nosotros</p>
            </div>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="testimonial-text">"Excelente servicio, el mobiliario llegó a tiempo y en perfectas condiciones. Nuestro evento fue un éxito total."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="bi bi-person-circle"></i>
                        </div>
                        <div class="author-info">
                            <h4>María González</h4>
                            <p>Organizadora de Bodas</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="testimonial-text">"La calidad del mobiliario superó nuestras expectativas. Definitivamente volveremos a trabajar con ellos."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="bi bi-person-circle"></i>
                        </div>
                        <div class="author-info">
                            <h4>Carlos Ramírez</h4>
                            <p>Director de Eventos Corporativos</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="testimonial-text">"Atención personalizada y profesional. El equipo nos asesoró en cada detalle para que todo saliera perfecto."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="bi bi-person-circle"></i>
                        </div>
                        <div class="author-info">
                            <h4>Ana Martínez</h4>
                            <p>Coordinadora de Eventos</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
        <div class="container">
            <div class="newsletter-content">
                <div class="newsletter-text">
                    <h2>Mantente Informado</h2>
                    <p>Suscríbete a nuestro boletín y recibe ofertas exclusivas, novedades y consejos para tus eventos</p>
                </div>
                <form class="newsletter-form">
                    <div class="form-group">
                        <input type="email" placeholder="Tu correo electrónico" required>
                        <button type="submit" class="btn btn-primary">Suscribirse</button>
                    </div>
                    <p class="newsletter-privacy">No compartimos tu información. Puedes cancelar en cualquier momento.</p>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-main">
            <div class="grid-footer container">
                <div class="footer-column">
                    <div class="footer-logo">
                        <i class="bi bi-house-heart"></i>
                        <span>FU<strong>RENT</strong></span>
                    </div>
                    <p class="footer-description">Transformamos tus eventos con mobiliario de alta calidad y servicio excepcional.</p>
                    <div class="footer-social">
                        <a href="#"><i class="bi bi-facebook"></i></a>
                        <a href="#"><i class="bi bi-instagram"></i></a>
                        <a href="#"><i class="bi bi-twitter"></i></a>
                        <a href="#"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>

                <div class="footer-column">
                    <h3>Categorías</h3>
                    <nav class="footer-menu">
                        <a href="#"><i class="bi bi-chevron-right"></i> Eventos Corporativos</a>
                        <a href="#"><i class="bi bi-chevron-right"></i> Bodas y Celebraciones</a>
                        <a href="#"><i class="bi bi-chevron-right"></i> Fiestas Infantiles</a>
                        <a href="#"><i class="bi bi-chevron-right"></i> Quinceañeros</a>    
                    </nav>
                </div>

                <div class="footer-column">
                    <h3>Sobre Nosotros</h3>
                    <nav class="footer-menu">
                        <a href="/about"><i class="bi bi-chevron-right"></i> Nuestra Historia</a>
                        <a href="#"><i class="bi bi-chevron-right"></i> Misión y Visión</a>
                        <a href="#"><i class="bi bi-chevron-right"></i> Política de Privacidad</a>
                        <a href="#"><i class="bi bi-chevron-right"></i> Términos y Condiciones</a>
                    </nav>
                </div>

                <div class="footer-column">
                    <h3>Contacto</h3>
                    <nav class="footer-menu">
                        <a href="#"><i class="bi bi-telephone"></i> +57 300 123 4567</a>
                        <a href="#"><i class="bi bi-envelope"></i> info@furniturerent.com</a>
                        <a href="#"><i class="bi bi-geo-alt"></i> Bogotá, Colombia</a>
                        <a href="#"><i class="bi bi-clock"></i> Lun - Sáb: 8am - 6pm</a>
                    </nav>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="container">
                <p class="copyright">© 2024 FURENT. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Vista Previa del Carrito -->
    <div th:replace="~{fragments/cart-preview :: cart-preview}"></div>
    
    <!-- Botón Admin -->
    <div th:replace="~{fragments/admin-button :: admin-button}"></div>

    <!-- Botón flotante de WhatsApp -->
    <a href="https://wa.me/573239427450" target="_blank" class="whatsapp-float" id="whatsappButton" title="Chatea con nosotros en WhatsApp">
        <i class="bi bi-whatsapp"></i>
    </a>

    <script>
        // Tooltip de WhatsApp que aparece cada 30 segundos (similar al del carrito)
        function mostrarTooltipWhatsApp() {
            const whatsappBtn = document.getElementById('whatsappButton');
            if (whatsappBtn) {
                // Crear tooltip si no existe
                let tooltip = document.getElementById('whatsappTooltipReminder');
                if (!tooltip) {
                    tooltip = document.createElement('div');
                    tooltip.id = 'whatsappTooltipReminder';
                    tooltip.className = 'whatsapp-tooltip';
                    // Aplicar estilos inline para asegurar que se vean
                    tooltip.style.cssText = `
                        position: absolute;
                        top: 50%;
                        left: calc(100% + 15px);
                        transform: translateY(-50%) translateX(-10px);
                        background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
                        color: white;
                        padding: 12px 18px;
                        border-radius: 12px;
                        font-size: 13px;
                        font-weight: 600;
                        white-space: nowrap;
                        box-shadow: 0 4px 20px rgba(37, 211, 102, 0.5);
                        opacity: 0;
                        visibility: hidden;
                        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                        pointer-events: none;
                        z-index: 1001;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                    `;
                    tooltip.innerHTML = `
                        <i class="bi bi-chat-dots-fill"></i>
                        <span>Cotización personalizada</span>
                    `;
                    // Agregar al botón de WhatsApp para posicionamiento relativo
                    whatsappBtn.appendChild(tooltip);
                }
                
                // Agregar animación de vibración al botón
                whatsappBtn.classList.add('whatsapp-shake-reminder');
                
                // Mostrar tooltip con estilos inline
                tooltip.style.opacity = '1';
                tooltip.style.visibility = 'visible';
                tooltip.style.transform = 'translateY(-50%) translateX(0)';
                
                // Ocultar después de 5 segundos
                setTimeout(() => {
                    tooltip.style.opacity = '0';
                    tooltip.style.visibility = 'hidden';
                    tooltip.style.transform = 'translateY(-50%) translateX(-10px)';
                    whatsappBtn.classList.remove('whatsapp-shake-reminder');
                }, 5000);
            }
        }

        // Mostrar tooltip al cargar la página (después de 5 segundos)
        setTimeout(mostrarTooltipWhatsApp, 5000);

        // Mostrar tooltip cada 30 segundos
        setInterval(mostrarTooltipWhatsApp, 30000);

        // Ocultar tooltip al hacer hover sobre el botón
        document.getElementById('whatsappButton')?.addEventListener('mouseenter', function() {
            const tooltip = document.getElementById('whatsappTooltipReminder');
            if (tooltip) {
                tooltip.style.opacity = '0';
                tooltip.style.visibility = 'hidden';
                tooltip.style.transform = 'translateY(-50%) translateX(-10px)';
                this.classList.remove('whatsapp-shake-reminder');
            }
        });
    </script>

</body>
</html>